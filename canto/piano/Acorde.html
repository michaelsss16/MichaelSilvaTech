<!DOCTYPE html>
<html>

<head>
    <title>Gerador de Acordes de Piano</title>
    <link rel="stylesheet" href="/style/main.css">
    <script src="/js/util.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/tone@latest"></script>
    <style>
        .container {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-top: 50px;
        }

        .chord-button {
            margin-top: 10px;
            padding: 10px 20px;
            font-size: 18px;
        }
    </style>
</head>

<body>
    <iframe src="/models/menuCanto.html" frameborder="0"></iframe>
    <h1>Gerador de Acordes de Piano</h1>

    <input type="range" id="Repeticoes" min="0" max="10000" value="0" step="1">
    <div class="container">
        <button class="chord-button" onclick="IniciarReproducao(['C3', 'e3', 'g3', 'c4'])">C</button>
        <button class="chord-button" onclick="ReproduzirAcorde(['C#3', 'E#3', 'G#3', 'C#4'])">C#</button>
        <!-- Resto dos botÃµes -->
    </div>

    <script>
        var synth = new Tone.PolySynth().toDestination();
        var slider = document.getElementById("Repeticoes");

        slider.addEventListener("input", function() {
            // Atualize o valor do sliderValue quando o slider for alterado
            var sliderValue = slider.value;
        });

        async function IniciarReproducao(acorde) {
            var sliderValue = slider.value; // Obtenha o valor do slider
            ReproduzirAcorde(acorde);
            await sleep(sliderValue);
            ReproduzirAcorde(acorde);
        }

        function ReproduzirAcorde(notes) {
            synth.triggerAttackRelease(notes, "4n");
        }

        function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }
    </script>
</body>

</html>
